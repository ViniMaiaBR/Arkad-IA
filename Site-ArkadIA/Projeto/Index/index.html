<!--
  Projeto Arkad AI - Funda√ß√£o Santo Andr√©
  Primeira vers√£o do sistema 
  desenvolvida pelos alunos:
  Vinicius Maia, Eduardo Romero, Gustavo Spaggiari e Kelvin Herculim
-->

<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ARKAD AI</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../css/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <canvas id="neural-bg"></canvas>
    <div class="animated-background">
        <div class="dots">
            <div class="dot"></div>
            <div class="dot"></div>
            <div class="dot"></div>
            <div class="dot"></div>
            <div class="dot"></div>
            <div class="dot"></div>
            <div class="dot"></div>
            <div class="dot"></div>
            <div class="dot"></div>
            <div class="dot"></div>
        </div>
    </div>
    <header>
        <nav class="navbar">
            <div class="logo">
                <img src="../images/logo.svg" alt="Logo ARKAD AI">
                <span>ARKAD AI</span>
            </div>
            <div class="nav-links">
                <a href="sobre.html">SOBRE</a>
                <a href="servicos.html">SERVI√áOS</a>
                <a href="planos.html">PLANOS</a>
                <a href="contato.html">CONTATO</a>
                <button class="profile-btn" id="profileBtn" onclick="openProfileModal()" title="Perfil" style="display: none;">
                    üë§
                </button>
                <button class="get-started-btn" onclick="checkAuthAndRedirect()">COME√áAR AGORA</button>
            </div>
        </nav>
    </header>

    <main>
        <!-- TELA INICIAL UNIFICADA -->
        <section class="hero-integrated">
            <div class="hero-content">
                <div class="hero-text">
                    <h1>Potencializando Seu<br>Neg√≥cio com IA</h1>
                    <p>Transforme suas opera√ß√µes empresariais e descubra novas<br>oportunidades atrav√©s de nossas solu√ß√µes de IA de ponta.</p>
                    
                    <!-- OP√á√ïES DE ACESSO -->
                    <div class="access-options" id="accessOptions">
                        <div class="access-card">
                            <div class="access-icon">
                                <i class="fas fa-user-plus"></i>
                            </div>
                            <h3>J√° tem conta?</h3>
                            <p>Fa√ßa login para acessar todos os recursos da plataforma</p>
                            <button class="access-btn login-btn" onclick="redirectToLogin()">
                                <i class="fas fa-sign-in-alt"></i>
                                FAZER LOGIN
                            </button>
                        </div>
                        
                        <div class="access-card">
                            <div class="access-icon">
                                <i class="fas fa-rocket"></i>
                            </div>
                            <h3>Testar sem Cadastro</h3>
                            <p>Experimente nossa IA gratuitamente e veja o potencial</p>
                            <button class="access-btn demo-btn" onclick="startDemo()">
                                <i class="fas fa-play"></i>
                                TESTAR AGORA
                            </button>
                        </div>
                    </div>
                    
                    <div class="hero-buttons">
                        <button class="learn-more-btn" onclick="window.location.href='sobre.html'">SAIBA MAIS</button>
                        <button class="get-started-btn" onclick="window.location.href='planos.html'">VER PLANOS</button>
                    </div>
                </div>
                
                <!-- CHAT DEMO (inicialmente oculto) -->
                <div class="hero-chat" id="demoChat" style="display: none;">
                    <div class="chat-header">
                        <h3><i class="fas fa-robot"></i> Chat Demo - Teste nossa IA</h3>
                        <p>Experimente gratuitamente sem cadastro</p>
                        <button class="close-demo-btn" onclick="closeDemo()">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    
                    <div class="chat-container">
                        <div class="chat-messages" id="freeChatMessages">
                            <div class="message ai-message">
                                <div class="message-content">
                                    <i class="fas fa-robot"></i>
                                    <p>Ol√°! Sou sua assistente de IA gratuita. Como posso ajudar voc√™ hoje?</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="chat-input-container">
                            <input type="text" placeholder="Digite sua pergunta aqui..." class="chat-input" id="freeChatInput">
                            <button class="send-button" onclick="sendFreeMessage()">
                                <i class="fas fa-paper-plane"></i>
                            </button>
                        </div>
                    </div>
                    
                    <div class="chat-info">
                        <p><i class="fas fa-info-circle"></i> Chat demo gratuito. Para recursos avan√ßados, <a href="planos.html">conhe√ßa nossos planos</a>.</p>
                        <p><i class="fas fa-lock"></i> Para salvar conversas e acessar recursos premium, <a href="login.html">fa√ßa login</a>.</p>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <script src="../js/neural-background.js"></script>
    <script src="../js/backend-storage.js"></script>
    <script>
        // Redirecionar para login
        function redirectToLogin() {
            window.location.href = 'login.html';
        }

        // Iniciar demo sem cadastro
        function startDemo() {
            const demoChat = document.getElementById('demoChat');
            const accessOptions = document.getElementById('accessOptions');
            const heroButtons = document.querySelector('.hero-buttons');
            
            // Adicionar classes para transi√ß√µes suaves
            accessOptions.classList.add('hidden');
            heroButtons.classList.add('hidden');
            
            // Aguardar transi√ß√£o e mostrar chat
            setTimeout(() => {
                accessOptions.style.display = 'none';
                heroButtons.style.display = 'none';
                demoChat.style.display = 'block';
                
                // Adicionar classe show para anima√ß√£o
                setTimeout(() => {
                    demoChat.classList.add('show');
                }, 50);
            }, 300);
            
            // Scroll suave para o chat
            setTimeout(() => {
                demoChat.scrollIntoView({ behavior: 'smooth' });
            }, 400);
            
            // Focar no input do chat e configurar listener de Enter
            setTimeout(() => {
                const chatInput = document.getElementById('freeChatInput');
                if (chatInput) {
                    chatInput.focus();
                    // Garantir que o listener de Enter esteja ativo
                    setupChatEnterListener();
                }
            }, 800);
        }

        // Fechar demo e voltar √†s op√ß√µes
        function closeDemo() {
            const demoChat = document.getElementById('demoChat');
            const accessOptions = document.getElementById('accessOptions');
            const heroButtons = document.querySelector('.hero-buttons');
            
            // Remover classe show para anima√ß√£o de sa√≠da
            demoChat.classList.remove('show');
            
            // Aguardar transi√ß√£o e ocultar chat
            setTimeout(() => {
                demoChat.style.display = 'none';
                
                // Mostrar op√ß√µes de acesso e bot√µes
                accessOptions.style.display = 'grid';
                heroButtons.style.display = 'flex';
                
                // Remover classes hidden
                setTimeout(() => {
                    accessOptions.classList.remove('hidden');
                    heroButtons.classList.remove('hidden');
                }, 50);
            }, 300);
            
            // Limpar mensagens do chat demo
            const messagesContainer = document.getElementById('freeChatMessages');
            messagesContainer.innerHTML = `
                <div class="message ai-message">
                    <div class="message-content">
                        <i class="fas fa-robot"></i>
                        <p>Ol√°! Sou sua assistente de IA gratuita. Como posso ajudar voc√™ hoje?</p>
                    </div>
                </div>
            `;
            
            // Scroll para o topo
            setTimeout(() => {
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }, 400);
        }

        // Verificar autentica√ß√£o e redirecionar
        function checkAuthAndRedirect() {
            const isLoggedIn = localStorage.getItem('isLoggedIn');
            const loginTime = localStorage.getItem('loginTime');
            if (isLoggedIn === 'true' && loginTime) {
                const currentTime = Date.now();
                const timeDiff = currentTime - parseInt(loginTime);
                if (timeDiff < 24 * 60 * 60 * 1000) { // 24 horas
                    window.location.href = 'chat.html';
                    return;
                }
            }
            window.location.href = 'login.html';
        }

        function redirectToChat() {
            const isLoggedIn = localStorage.getItem('isLoggedIn');
            if (isLoggedIn !== 'true') {
                window.location.href = 'login.html';
                return;
            }
            
            const searchInput = document.getElementById('searchInput');
            const query = searchInput.value.trim();
            if (query) {
                window.location.href = `chat.html?query=${encodeURIComponent(query)}`;
            } else {
                window.location.href = 'chat.html';
            }
        }

        // Permite enviar a pesquisa com Enter
        document.getElementById('searchInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                redirectToChat();
            }
        });

        // Verificar se usu√°rio est√° logado ao carregar a p√°gina
        function initAuth() {
            const userInfo = localStorage.getItem('userInfo');
            if (userInfo) {
                try {
                    const user = JSON.parse(userInfo);
                    // Usu√°rio logado - pode adicionar informa√ß√µes do usu√°rio na interface
                    console.log('Usu√°rio logado:', user.nome || user.name);
                } catch (error) {
                    console.error('Erro ao parsear userInfo:', error);
                }
            }
        }

        // Fun√ß√£o para enviar mensagem no chat gratuito
        function sendFreeMessage() {
            const input = document.getElementById('freeChatInput');
            const message = input.value.trim();
            
            if (!message) return;
            
            // Adicionar mensagem do usu√°rio
            addFreeMessage(message, 'user');
            
            // Limpar input
            input.value = '';
            
            // Simular resposta da IA (respostas b√°sicas)
            setTimeout(() => {
                const response = getFreeAIResponse(message);
                addFreeMessage(response, 'ai');
            }, 1000);
        }

        // Fun√ß√£o para adicionar mensagem ao chat gratuito
        function addFreeMessage(text, type) {
            const messagesContainer = document.getElementById('freeChatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${type}-message`;
            
            const icon = type === 'user' ? 'fas fa-user' : 'fas fa-robot';
            messageDiv.innerHTML = `
                <div class="message-content">
                    <i class="${icon}"></i>
                    <p>${text}</p>
                </div>
            `;
            
            messagesContainer.appendChild(messageDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        // Fun√ß√£o para gerar respostas b√°sicas da IA gratuita
        function getFreeAIResponse(userMessage) {
            const message = userMessage.toLowerCase();
            
            if (message.includes('vendas') || message.includes('vender')) {
                return 'Para aumentar vendas, foque em: 1) Conhecer seu cliente, 2) Melhorar seu produto/servi√ßo, 3) Marketing digital, 4) Atendimento ao cliente. Precisa de mais detalhes?';
            } else if (message.includes('marketing') || message.includes('promover')) {
                return 'Marketing eficaz inclui: redes sociais, SEO, conte√∫do de qualidade, email marketing e parcerias. Qual √°rea voc√™ gostaria de explorar?';
            } else if (message.includes('neg√≥cio') || message.includes('empresa')) {
                return 'Para ter sucesso no neg√≥cio: planejamento, an√°lise financeira, equipe qualificada, inova√ß√£o e foco no cliente s√£o essenciais. Em que posso ajudar?';
            } else if (message.includes('financeiro') || message.includes('dinheiro')) {
                return 'Gest√£o financeira b√°sica: controle de receitas/despesas, fluxo de caixa, reserva de emerg√™ncia e investimentos. Precisa de orienta√ß√£o espec√≠fica?';
            } else if (message.includes('tecnologia') || message.includes('digital')) {
                return 'Digitaliza√ß√£o pode otimizar processos, reduzir custos e melhorar atendimento. Considere automa√ß√£o, CRM e ferramentas online.';
            } else {
                return 'Interessante pergunta! Para uma resposta mais detalhada e personalizada, considere nossos planos premium com IA avan√ßada. Posso ajudar com algo espec√≠fico?';
            }
        }

        // Fun√ß√£o para adicionar evento de Enter no input do chat gratuito
        function setupChatEnterListener() {
            const freeChatInput = document.getElementById('freeChatInput');
            if (freeChatInput) {
                // Remove listener anterior se existir
                freeChatInput.removeEventListener('keypress', handleChatEnter);
                // Adiciona novo listener
                freeChatInput.addEventListener('keypress', handleChatEnter);
            }
        }

        // Handler para o evento de Enter
        function handleChatEnter(e) {
            if (e.key === 'Enter') {
                sendFreeMessage();
            }
        }

        // Adicionar evento de Enter no input do chat gratuito quando o DOM carregar
        document.addEventListener('DOMContentLoaded', function() {
            setupChatEnterListener();
        });

        // Inicializar quando a p√°gina carregar
        initAuth();

        // Verificar se usu√°rio est√° logado para mostrar bot√£o de perfil
        function checkProfileButton() {
            const isLoggedIn = localStorage.getItem('isLoggedIn');
            const profileBtn = document.getElementById('profileBtn');
            if (profileBtn) {
                profileBtn.style.display = isLoggedIn === 'true' ? 'flex' : 'none';
            }
        }
        checkProfileButton();
    </script>

    <!-- Modal de Perfil -->
    <div id="profileModal" class="profile-modal">
        <div class="profile-modal-content">
            <div class="profile-modal-header">
                <h2>üë§ Perfil</h2>
            </div>
            <div class="profile-field">
                <label>Nome</label>
                <input type="text" id="profileName" readonly />
            </div>
            <div class="profile-field">
                <label>Email</label>
                <input type="text" id="profileEmail" readonly />
            </div>
            <div class="profile-field">
                <label>Nova Senha</label>
                <input type="password" id="profileNewPassword" placeholder="M√≠nimo 6 caracteres" minlength="6" />
            </div>
            <div class="profile-field">
                <label>Confirmar Senha</label>
                <input type="password" id="profileConfirmPassword" placeholder="Repita a nova senha" minlength="6" />
                <div class="profile-error-msg" id="profileErrorMsg"></div>
                <div class="profile-success-msg" id="profileSuccessMsg"></div>
            </div>
            <div class="profile-modal-actions">
                <button class="profile-btn-ok" onclick="closeProfileModal()">OK</button>
                <button class="profile-btn-logout" onclick="handleProfileLogout()">Logout</button>
            </div>
        </div>
    </div>

    <script src="../js/backend-storage.js"></script>
    <script>
        // Fun√ß√µes do Modal de Perfil
        function openProfileModal() {
            const modal = document.getElementById('profileModal');
            const userInfo = JSON.parse(localStorage.getItem('userInfo') || 'null');
            
            if (!userInfo) {
                window.location.href = 'login.html';
                return;
            }
            
            document.getElementById('profileName').value = userInfo.nome || '';
            document.getElementById('profileEmail').value = userInfo.email || '';
            document.getElementById('profileNewPassword').value = '';
            document.getElementById('profileConfirmPassword').value = '';
            hideProfileMessages();
            
            modal.classList.add('show');
        }

        function closeProfileModal() {
            const modal = document.getElementById('profileModal');
            modal.classList.remove('show');
            hideProfileMessages();
        }

        function hideProfileMessages() {
            const errorMsg = document.getElementById('profileErrorMsg');
            const successMsg = document.getElementById('profileSuccessMsg');
            if (errorMsg) errorMsg.style.display = 'none';
            if (successMsg) successMsg.style.display = 'none';
        }

        function showProfileError(message) {
            const errorMsg = document.getElementById('profileErrorMsg');
            if (errorMsg) {
                errorMsg.textContent = message;
                errorMsg.style.display = 'block';
            }
            const successMsg = document.getElementById('profileSuccessMsg');
            if (successMsg) successMsg.style.display = 'none';
        }

        function showProfileSuccess(message) {
            const successMsg = document.getElementById('profileSuccessMsg');
            if (successMsg) {
                successMsg.textContent = message;
                successMsg.style.display = 'block';
            }
            const errorMsg = document.getElementById('profileErrorMsg');
            if (errorMsg) errorMsg.style.display = 'none';
        }

        // Salvar mudan√ßa de senha ao pressionar Enter no √∫ltimo campo
        document.addEventListener('DOMContentLoaded', function() {
            const confirmPasswordField = document.getElementById('profileConfirmPassword');
            if (confirmPasswordField) {
                confirmPasswordField.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        saveProfilePassword();
                    }
                });
            }

            // Salvar senha quando clicar fora do modal
            const modal = document.getElementById('profileModal');
            if (modal) {
                modal.addEventListener('click', function(e) {
                    if (e.target === this) {
                        saveProfilePassword();
                        closeProfileModal();
                    }
                });
            }
        });

        async function saveProfilePassword() {
            const newPassword = document.getElementById('profileNewPassword').value;
            const confirmPassword = document.getElementById('profileConfirmPassword').value;
            
            if (!newPassword && !confirmPassword) {
                // Nada a fazer se campos vazios
                return;
            }
            
            if (!newPassword || !confirmPassword) {
                showProfileError('Preencha ambos os campos de senha.');
                return;
            }
            
            if (newPassword.length < 6) {
                showProfileError('A senha deve ter pelo menos 6 caracteres.');
                return;
            }
            
            if (newPassword !== confirmPassword) {
                showProfileError('As senhas n√£o coincidem.');
                return;
            }
            
            try {
                const userInfo = JSON.parse(localStorage.getItem('userInfo') || 'null');
                if (!userInfo || !userInfo.id) {
                    showProfileError('Erro: Usu√°rio n√£o encontrado.');
                    return;
                }

                // Bloquear altera√ß√£o de senha do admin
                const isAdmin = (userInfo.email || '').toLowerCase() === 'admin' || (userInfo.nome || '').toLowerCase() === 'admin' || (userInfo.id || '') === 'user_admin_default';
                if (isAdmin) {
                    showProfileError('A senha do administrador n√£o pode ser alterada.');
                    return;
                }
                
                if (!window.backendStorage) {
                    await new Promise(resolve => setTimeout(resolve, 500));
                }
                
                if (!window.backendStorage) {
                    showProfileError('Sistema de armazenamento n√£o dispon√≠vel.');
                    return;
                }
                
                // Atualizar senha
                window.backendStorage.updateUser(userInfo.id, { senha: newPassword });
                
                showProfileSuccess('Senha alterada com sucesso!');
                
                // Limpar campos ap√≥s sucesso
                setTimeout(() => {
                    document.getElementById('profileNewPassword').value = '';
                    document.getElementById('profileConfirmPassword').value = '';
                    hideProfileMessages();
                }, 2000);
                
            } catch (error) {
                console.error('Erro ao alterar senha:', error);
                showProfileError(error.message || 'Erro ao alterar senha.');
            }
        }

        function handleProfileLogout() {
            // Fazer logout completo (remove tudo, mesmo "lembrar de mim")
            try {
                const currentSession = localStorage.getItem('currentSession');
                if (currentSession && window.backendStorage) {
                    try {
                        const session = JSON.parse(currentSession);
                        window.backendStorage.endSession(session.id);
                    } catch (e) {
                        console.error('Erro ao finalizar sess√£o:', e);
                    }
                }
            } catch (error) {
                console.error('Erro ao fazer logout:', error);
            }
            
            // Remover todas as informa√ß√µes de login
            localStorage.removeItem('isLoggedIn');
            localStorage.removeItem('loginTime');
            localStorage.removeItem('userInfo');
            localStorage.removeItem('currentSession');
            
            // Fechar modal e redirecionar
            closeProfileModal();
            window.location.href = 'login.html';
        }

        // Verificar login ao carregar p√°gina e atualizar bot√£o de perfil
        window.addEventListener('load', function() {
            checkProfileButton();
        });
    </script>
    <script src="../js/header-scroll.js"></script>

    <footer class="footer">
        <div class="social-connect">
            <p>Conecte-se conosco nas redes sociais!</p>
            <div class="social-icons">
                <a href="#"><i class="fab fa-facebook-f"></i></a>
                <a href="#"><i class="fab fa-twitter"></i></a>
                <a href="#"><i class="fab fa-google-plus-g"></i></a>
                <a href="https://www.linkedin.com/company/arkadai/?viewAsMember=true"><i class="fab fa-linkedin-in"></i></a>
                <a href="#"><i class="fab fa-instagram"></i></a>
            </div>
        </div>
        
        <div class="footer-content">
            <div class="footer-section">
                <h3>EMPRESA</h3>
                <p>Plataforma inteligente de consultoria empresarial que combina tecnologia e an√°lise de mercado para orientar decis√µes estrat√©gicas, otimizar investimentos e impulsionar o crescimento de empresas de todos os portes.</p>
            </div>
            
            <div class="footer-section">
                <h3>PRODUTOS</h3>
                <ul>
                    <li><a href="#">IA Personalizada</a></li>
                    <li><a href="#">An√°lise de Dados</a></li>
                    <li><a href="#">Automa√ß√£o</a></li>
                    <li><a href="#">Consultoria</a></li>
                </ul>
            </div>
            
            <div class="footer-section">
                <h3>EQUIPE</h3>
                <ul>
                    <li><a href="https://www.linkedin.com/in/vinicius-maia-190279219?utm_source=share&utm_campaign=share_via&utm_content=profile&utm_medium=android_app">Vinicius Maia</a></li>
                    <li><a href="https://www.linkedin.com/in/eduardo-romero-gomes-a263a5251?utm_source=share&utm_campaign=share_via&utm_content=profile&utm_medium=ios_app">Eduardo Romero</a></li>
                    <li><a href="https://www.linkedin.com/in/gustavo-spaggiari-897246247?utm_source=share&utm_campaign=share_via&utm_content=profile&utm_medium=ios_app">Gustavo Spaggiari</a></li>
                    <li><a href="https://www.linkedin.com/in/kelvin-herculin-2032482b0?utm_source=share&utm_campaign=share_via&utm_content=profile&utm_medium=android_app">Kelvin Herculin</a></li>
                </ul>
            </div>
            
            <div class="footer-section">
                <h3>LINKS √öTEIS</h3>
                <ul>
                    <li><a href="nossa-equipe.html">Nossa Equipe</a></li>
                    <li><a href="#">Seja um Parceiro</a></li>
                    <li><a href="#">Pre√ßos</a></li>
                    <li><a href="#">Ajuda</a></li>
                </ul>
            </div>
            
            <div class="footer-section">
                <h3>CONTATO</h3>
                <ul>
                    <li><i class="fas fa-home"></i> S√£o Paulo, SP 01234-000, BR</li>
                    <li><i class="fas fa-envelope"></i> contato@arkadia.com</li>
                    <li><i class="fas fa-phone"></i> +55 11 4002-8922</li>
                    <li><i class="fas fa-print"></i> +55 11 1234 5679</li>
                </ul>
            </div>
        </div>
        
        <div class="footer-bottom">
            <p>¬© 2024 Copyright: <a href="#">ARKAD AI</a></p>
        </div>
    </footer>
</body>
</html> 